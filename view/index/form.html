<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <script src="/js/jquery.js"></script>
    <script>
        //js代码ajax请求
        function test(){
            // obj = {};
            // obj.name = "测试用户";
            // obj.msg = "ajax发送的参数";

            var msg = "ajax发送的消息";
            obj = {name:"测试用户",msg:msg};
            // obj = {}
            // obj["name"] = "测试用户";
            // obj["msg"] = "ajax发送的参数";
            $.ajax({
                url: "{:url('json')}",
                data:obj,
                type: "POST",
                contentType:'application/json',
                dataType: "json",
                // false为同步，true为异步，默认为false
                // 对于success返回，设置为false或true，似乎看不出影响

                // 跨域请求访问,不设置则在浏览器中无法访问服务器
                // 错误处理函数最好加上，否则将很难排错
                error:function(msg){
                    /*
                        msg为json对象，返回以下字符串：
                        {"readyState":4,"responseText":"success","status":200,"statusText":"parsererror"}
                        说明后端服务器没有正确返回json数据类型
                    */
                    document.write(JSON.stringify(msg));

                },
                success: function(data) {
                    // data为json对象
                    document.getElementById("content").innerText=JSON.stringify(data);
                }
            });
        }
        window.onload = function(){
            test();
        }
    </script>
</head>
<body>
显示结果：
<div id="content"></div>
</body>
</html>

